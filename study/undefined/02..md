# 02. 물리 계층과 데이터 링크 계층

### <mark style="color:blue;">02-1 이더넷</mark> <a href="#id-1b4aa93c-3977-8058-9bdc-f1aa2cb9abd6" id="id-1b4aa93c-3977-8058-9bdc-f1aa2cb9abd6"></a>

**물리 계층**과 **데이터 링크 계층**은 **서로 밀접하게 연관**되어 있으며, 두 계층은 **이더넷이라는 공통된 기술이 사용됨.**

송수신되는 **프레임의 형태**와 **프레임을 주고받는 방법** 등을 정의한 **네트워크 기술.**

* **이더넷(Ethernet)**
  * 현대 LAN, 특히 유선 LAN 환경에서 가장 대중적으로 사용되는 기술

<details>

<summary>이더넷 추가 내용</summary>

#### 이더넷 표준(IEEE 802.3)

오늘날의 유선 LAN환경은 대부분 이더넷을 기반으로 구성됨

허브, 스위치, NIC, 케이블 등 물리 계층과 데이터 링크 계층의 다양한 장비들이 특정 이더넷 표준을 이해하고, 따른다고 봐도 무방함.

#### 통신 매체 표기 형태

전송 속도BASE-추가 특성

(예시: 15GBASE-LR) 전송속도: 15G, 추가 특성: LR

#### 통신 매체 종류

동축 케이블, 트위스티드 페어 케이블, 광섬유 케이블…지금은 별로 안중요한듯.

</details>



#### ⭐ 이더넷 프레임 <a href="#id-1b4aa93c-3977-80a4-aefe-f9b8c2e379ae" id="id-1b4aa93c-3977-80a4-aefe-f9b8c2e379ae"></a>

<figure><img src="../../.gitbook/assets/image (3).png" alt="" width="563"><figcaption></figcaption></figure>

*   **프리앰블**(Preamble)

    * 이더넷 프레임의 시작을 알리는 8바이트


* **수신지, 송신지 MAC 주소**
  *   **MAC(Media Access Control) 주소 →** (**’물리적 주소’** 라고도 불림)

      * **네트워크 인터페이스마다 부여되는** 6바이트 길이의 **주소(물리적 주소)**&#xB85C;, **LAN내의 수신지와 송신지를 특정**할 수 있음.
      * **NIC(Network Interface Controller)**&#xB77C;는 장비가 **네트워크 인터페이스 역할을 담당**하고, NIC이 여러개라면 MAC 주소도 여러 개 있을 수있음.
      * 일반적으로는 고유하고, 일반적으로는 변경되지 않는 주소.


* **타입/길이**
* **FCS(Frame Check Sequence)**
  * 수신한 이더넷 프레임에 오류가 있는지 확인하기 위한 필드.
  * **CRC(Cycle Reduendancy Check),** 즉 순환 중복 검사로 불리는 오류 검출용 값이 들어감.
  * CRC값이 일치하지 않으면 Frame을 폐기함.

{% hint style="success" %}
#### 💡참조 1. 토큰 링

호스트 끼리 **토큰**을 주고받으며, **토큰을 가지고 있어야지만 다른 호스트에게 메시지를 송신할 수 있음.**

![](<../../.gitbook/assets/image 1 (3).png>)
{% endhint %}

***

### <mark style="color:blue;">02-2 NIC와 케이블</mark> <a href="#id-1b4aa93c-3977-8039-9b53-cbc06340e538" id="id-1b4aa93c-3977-8039-9b53-cbc06340e538"></a>

#### ⭐ NIC <a href="#id-1b4aa93c-3977-80be-a8f0-c320e234970b" id="id-1b4aa93c-3977-80be-a8f0-c320e234970b"></a>

**호스트와 유무선 통신 매체를 연결**하고, **통신 매체를 통해 전달되는 신호와 컴퓨터가 이해할 수 있는 정보 간에 변환**을 담당하는 네트워크 장비.

즉, **NIC은 호스트와 통신 매체 사이의 인터페이스 역할을 담당하는 네트워크 장비.**

통신 매체를 통해 전달되는 신호를 사람들이 주고받는 ‘말’에 비유한다면, **NIC**은 ‘귀’와 ‘입’에 비유할 수 있음.

{% columns %}
{% column %}
#### 트위스티드 페어 케이블(구리선)

![](<../../.gitbook/assets/image 2 (3).png>)
{% endcolumn %}

{% column %}
#### 광섬유 케이블(광섬유)

![](<../../.gitbook/assets/image 3 (3).png>)
{% endcolumn %}
{% endcolumns %}

***

### <mark style="color:blue;">02-3 허브</mark> <a href="#id-1b4aa93c-3977-80bf-9107-ff6741c3d230" id="id-1b4aa93c-3977-80bf-9107-ff6741c3d230"></a>

#### ⭐ 주소 개념이 없는 물리 계층 <a href="#id-1b4aa93c-3977-8052-88ed-efb3b4636f89" id="id-1b4aa93c-3977-8052-88ed-efb3b4636f89"></a>

물리 계층에는 **주소 개념이 없고, 송수신지를 특정할 수 있는 주소는 데이터 링크 계층부터 존재하는 개념이다.**



#### ⭐ 허브 <a href="#id-1b4aa93c-3977-8034-ac72-cfa82989ec7f" id="id-1b4aa93c-3977-8034-ac72-cfa82989ec7f"></a>

*   **허브(Hub)**

    * **여러 대의 호스트를 연결하는 장치**
    * **리피터 허브**라 부르기도 하고, 이더넷 네트워크의 허브는 **이더넷 허브**라고도 불린다.
    * 4개의 연결 지점을 **포트(Port)**&#xB77C;고 하고, **전송 계층의 포트와는 다른 의미**이다.

    <figure><img src="../../.gitbook/assets/image 4 (3).png" alt="" width="214"><figcaption></figcaption></figure>
* **허브의 특징 (**&#xC624;늘날 인터넷 환경에서 잘 사용되지 않는다…)
  * **전달받은 신호를 다른 모든 포트로 그대로 다시 내보낸다.**
    * **허브**는 **물리 계층에 속하는 장비**이고, **물리 계층에서는 주소 개념이 없기에** 허브는 **수신지를 특정할 수 없다.**
    * 따라서 신호를 받으면 **어떠한 조작이나 판단을 하지 않고 송신지를 제외한 모든 포트에 그저 내보내기만 한다.**
    * 신호를 전달받은 **모든 호스트는 데이터 링크 계층에서 패킷의 MAC 주소를 확인**하고 **자신과 관련 없는 주소는 폐기**한다.
  * **반이중 모드로 통신한다.**
    * 마치 1차선 도로처럼 송수신을 번갈아 가면서 하는 통신 방식.
    * **전이중 모드**는 송수신을 동시에 양방향으로 할 수 있는 통신 방식.

{% hint style="success" %}
📌 **리피터**

허브 이외에 물리 계층의 대표적인 장비로, 전기 신호가 감소하거나 왜곡되는 것을 방지하기 위해 전기 신호를 증폭시켜 주는 장비. **허브는 이러한 리피터의 기능을 포함하는 경우가 많음.**
{% endhint %}



*   **콜리전 도메인**

    * 허브는 반이중 모드로 통신하기 때문에, **충돌 발생 가능성**이 있다. 이때, 충돌이 발생할 수 있는 영역을 **콜리전 도메인(Collision domain)** 이라고 한다. 허브에 연결된 모든 호스트는 같은 콜리전 도메인에 속한다.

    <figure><img src="../../.gitbook/assets/image 5 (3).png" alt="" width="375"><figcaption></figcaption></figure>

    * 충돌 문제를 해결하려면 **CSMA/CD** 프로토콜을 사용하거나, **스위치** 장비를 사용해야 한다.



#### ⭐ CSMA/CD (Carrier Sense Multiple Access with Collision Detection) <a href="#id-1b4aa93c-3977-805c-b326-f4171ef40da6" id="id-1b4aa93c-3977-805c-b326-f4171ef40da6"></a>

**CSMA/CD는 반이중 이더넷 네트워크의 충돌 방지 프로토콜.**

*   **CS(Carrier Sense)**

    * 메시지를 보내기 전에 현재 네트워크상에서 전송 중인 것이 있는지를 먼저 확인한다.


*   **MA(Multiple Access)**

    * 복수의 호스트가 네트워크에 접근하려는 상황을 **다중 접근(MA)**&#xC774;라 한다.


*   **CD(Collision Detection)**

    * 충돌을 감지하면 **전송이 중단**되고,
    * 충돌을 검출한 호스트는 다른 이들에게 **충돌이 발생했음을 알리고자 잼 신호(Jam signal)라는 특별한 신호를 보낸다.**
    * 그리고 **임의의 시간 동안 기다린 뒤에 다시 전송**한다.


* **CSMA/CD 프로토콜 진행 방식**
  1. 먼저 현재 전송이 가능한 상태인지를 확인하고,
  2. 다른 호스트가 전송 중이지 않을 때 메시지를 전송한다.
  3. 만일 부득이하게 다수의 호스트가 접근하여 충돌이 발생하면 임의의 시간만큼 대기한 후 다시 전송한다.

***

### <mark style="color:blue;">02-4 스위치</mark> <a href="#id-1b4aa93c-3977-8019-8e5e-e35f8bd119e8" id="id-1b4aa93c-3977-8019-8e5e-e35f8bd119e8"></a>

**스위치**는 **콜리전 도메인을 포트별로 나누어** 주며 **전이중 모드 통신**을 지원하는 **데이터 링크 계층**의 장비.

#### ⭐ 스위치 <a href="#id-1b4aa93c-3977-802d-88b8-f0c194efda6c" id="id-1b4aa93c-3977-802d-88b8-f0c194efda6c"></a>

*   **스위치**

    * **데이터 링크 계층**의 네트워크 장비로, 2계층에서 사용한다 하여 **L2 스위치**라고도 부름.
    * 허브와 달리 MAC 주소를 학습하여 **특정 MAC 주소를 가진 호스트에만 프레임을 전달**할 수 있고, **전이중 모드의 통신**을 지원함.


* **스위치의 특징**
  * **MAC 주소 학습**
    * 특정 포트와 해당 포트에 연결된 호스트의 MAC 주소와의 관계를 기억함.
    * 이를 통해 원하는 호스트에만 프레임을 전달할 수 있음.
  * **MAC 주소 테이블**
    * 포트와 연결된 호스트의 MAC 주소 간의 연관 관계를 메모리에 표 형태로 기억하고, 이 정보를 **MAC 주소 테이블**이라 함.

<figure><img src="../../.gitbook/assets/image 6 (3).png" alt="" width="375"><figcaption></figcaption></figure>

#### ⭐ MAC 주소 학습 <a href="#id-1b4aa93c-3977-80f2-9783-f920ee4eaa46" id="id-1b4aa93c-3977-80f2-9783-f920ee4eaa46"></a>

**스위치는 MAC 주소 테이블을 통해 MAC 주소를 학습하여 원하는 포트로 패킷을 포워딩하고, 원치 않은 포트는 필터링할 수 있음.**

스위치의 MAC 주소 학습은 프레임 내 **‘송신지 MAC 주소’**&#xD544;드를 바탕으로 이루어짐.

1. **플러딩(Flooding)**
   * **수신지 호스트가 어느 포트에 연결되어 있는지 모를 때**(아직 MAC 주소 테이블에 값이 없을 때)**,** 허브처럼 송신시 포트를 제외한 모든 포트로 프레임을 전송하는 동작.

<figure><img src="../../.gitbook/assets/image 7 (1).png" alt="" width="563"><figcaption></figcaption></figure>

2. **포워딩(Forwarding)과 필터링(Filtering)**
   * **필터링**
     * 전달받은 프레임을 어디로 내보내고, 어디로 내보내지 않을지 결정하는 스위치의 기능
   * **포워딩**
     * 프레임이 전송될 포트에 실제로 프레임을 내보내는 것

<figure><img src="../../.gitbook/assets/image 8 (1).png" alt="" width="563"><figcaption></figcaption></figure>

3. **에이징**
   * 만약 MAC 주소 테이블에 등록된 특정 포트에서 일정 시간 동안 프레임을 전송받지 못했다면 해당 항목은 삭제됨.

{% hint style="success" %}
📌 **브리지(bridge)**

* 데이터 링크 계층의 스위치와 유사한 장비로 **브리지(bridge)**&#xB77C;는 장비도 있음.

<img src="../../.gitbook/assets/image 9 (1).png" alt="" data-size="original">

* 네트워크 영역을 구획하여 콜리전 도메인을 나누거나 네트워크를 확장하는 용도로 사용됨.
* 스위치 처럼 MAC 주소를 학습할 수 있음.
* 단일 장비로서의 브리지는 최근에 대중화된 스위치에 비해 사용 빈도가 줄어드는 추세
  * 브리지를 이용한 **네트워크 구획 및 확장**은 **스위치를 통해서도 얼마든지 가능**하고, **일반적으로 브리지의 기능을 포괄**할 뿐 아니라 더 다양하고, **프레임 처리 성능 면에서도 우수**하기 때문
{% endhint %}



#### ⭐ VLAN(Virtual LAN) <a href="#id-1b4aa93c-3977-80ee-b4b9-d3c763ed682e" id="id-1b4aa93c-3977-80ee-b4b9-d3c763ed682e"></a>

* **VLAN은 스위치를 이용해 만들 수 있는 가상의 LAN**
* VLAN을 구성하면 한 대의 물리적 스위치라 해도 **여러 대의 스위치가 있는 것처럼 논리적인 단위로 LAN을 구획할 수 있음.**

<figure><img src="../../.gitbook/assets/image 10 (1).png" alt="" width="375"><figcaption></figcaption></figure>

*   **브로드캐스트 도메인도 달라져** **다른 VLAN에 속한 호트에게까지는 전달되지 않음.**

    ![](<../../.gitbook/assets/image 11 (1).png>)
* **포트 기반 VLAN**
  * 스위치의 포트가 VLAN을 결정하는 방식
  * 사전에 특정 포트에 VLAN을 할당하고, 해당 포트에 호스트를 연결함으로써 VLAN에 포함시킬 수 있음.

<figure><img src="../../.gitbook/assets/image 12 (1).png" alt="" width="563"><figcaption></figcaption></figure>

* **VLAN 트렁킹(VLAN Trunking)**
  * **두 대 이상의 VLAN 스위치를 효율적으로 연결하여 확장하는 방법.**
  *   스위치 간의 통신을 위한 특별한 포트인 \*\*트렁크 포트(Trunk port)\*\*에 VLAN 스위치를 서로 연결하는 방식

      ![](<../../.gitbook/assets/image 13 (1).png>)
  *   **확장된 이더넷 프레임**을 사용하여 **VLAN 태그**라는 정보를 추가 해 VLAN을 식별할 수 있음.

      ![](<../../.gitbook/assets/image 14 (1).png>)
* **MAC 기반 VLAN**
  * 사전에 설정된 **MAC 주소에 따라 VLAN을 결정**하는 방법.
  * 포트가 VLAN을 결정하는 것이 아닌, **송수신 프레임 속 MAC 주소가 호스트가 속할 VLAN을 결정하는 방식.**

<figure><img src="../../.gitbook/assets/image 15 (1).png" alt="" width="563"><figcaption></figcaption></figure>
